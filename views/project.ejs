<!DOCTYPE html>
<html lang="en">

      <head>
        <meta charset="UTF-8">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
        <title>Project</title>
        <meta name="author" content="Ilea Shutler">
        <meta name="description" content="A page for one project.">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/style.css">
    </head>

    <body>
    <!-- Header EJS Partial (includes favicon, nav bar & Connect Wallet button)-->
      <%- include('header'); %>

    <!-- Hidden data for JS (contracts, mints, projects) -->
    <script>
  console.log({ contracts: "<%= contracts %>", mints: "<%= mints %>", projects: "<%= JSON.stringify(projects) %>", project: "<%= JSON.stringify(project) %>" });
</script>  
    <div id="contracts" class="d-none"><%= contracts %></div>
    <div id="mints" class="d-none"><%= mints %></div>
    <div id="projects" class="d-none"><%= JSON.stringify(projects) %></div>

    <div class="container my-4 body-text-against-orange ">
       <!-- Project Image & Title-->
      <img src="<%= project.img_url %>"
        class="img-fluid mx-auto d-block project-img mb-4" alt="<%= project.project_name %> project image">
      <div class="project-title-bg mb-4 text-center">
        <h1 class="mb-0"><%= project.project_name %></h1>
      </div>

       <!-- Break line between title & project details -->
      <div class="col-12 d-block">
        <hr class="my-4" style="border-color: #000000">
      </div>

      <!-- Project Details -->
      <p><%= project.project_description %></p>
      <div id="project-id" class="d-none"><%= project.id %></div>
      <ul>
        <li><span class="fw-bold">Quantity:</span> <%= project.quantity %></li>
        <li><span class="fw-bold">Price (ETH):</span> <%= project.price_eth %></li>
        <li><span class="fw-bold">Open Date:</span> <%= project.open_date_gmt %></li>
        <li><span class="fw-bold">Royalty:</span> <%= project.royalty_percent %>%</li>
        <li><span class="fw-bold">Active:</span> <%= project.active %></li>
      </ul>

      <!-- "Back to All Projects" Button -->
      <a href="/projects" class="btn btn-primary mb-2 flex-fill">Back to All Projects</a>
    </div>

    <!-- Mints Section --> 
     <a id="mint-button" class="btn btn-primary">Mint</a>
     <h3 class="topic">Status: </h3><span id="status">Active - </span><span id="mint-quant"></span><span> of
                <%=project.quantity  %> minted</span></h3>
    <section class="justify-content-center text-white">
      <div class="text-center justify-content-center mt-5 mb-2">
        <h2 class="text-white">Mints from this project</h2>
        <p id="mint-message" class="text-white"></p>
      </div>
      <div class="mb-5">
        <div class="row justify-content-center">
          <div id="token-views"
            class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-3 text-center justify-content-center text-white">
            <!-- the client side ejs will render these dynamically from the script -->
          </div>
        </div>
      </div>
    </section>
  </main>




    </div>

    <!-- Footer EJS Partial -->
     <%- include('footer'); %>

  <!-- Bootstrap Bundle & Custom Page Script -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
   <script type="module" src="/js/project.js"></script>

  </body>
</html>