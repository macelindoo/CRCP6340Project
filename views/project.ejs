<!DOCTYPE html>
<html lang="en">

      <head>
        <meta charset="UTF-8">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
        <title>Project</title>
        <meta name="author" content="Ilea Shutler">
        <meta name="description" content="A page for one project.">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/style.css">
    </head>

    <body>
    <!-- Header EJS Partial (includes favicon, nav bar & Connect Wallet button)-->
      <%- include('header'); %>

    <!-- Hidden data for JS (contracts, mints, projects) -->
    <script>
  console.log({ contracts: "<%= contracts %>", mints: "<%= mints %>", projects: "<%= JSON.stringify(projects) %>", project: "<%= JSON.stringify(project) %>" });
</script>  
    <div id="contracts" class="d-none"><%= contracts %></div>
    <div id="mints" class="d-none"><%= mints %></div>
    <div id="projects" class="d-none"><%= JSON.stringify(projects) %></div>

    <div class="container my-4 body-text-against-orange ">
       <!-- Project Image & Title-->
      <!-- <img src="<%= project.img_url %>"
        class="img-fluid mx-auto d-block project-img mb-4" alt="<%= project.project_name %> project image"> -->
<div class="text-center">
    <% if (project.is_nft && project.img_url) { %>
      <img
        src="<%= project.img_url %>"
        alt="NFT Project Image"
        id="nftProjectImage"
        class="img-fluid mx-auto d-block"
        style="cursor:pointer;"
        onclick="mintNFT()"
      >
    <% } else if (project.project_url) { %>
      <iframe
        src="<%= project.project_url %>"
        width="<%= project.iframe_width || 900 %>"
        height="<%= project.iframe_height || 700 %>"
        style="border:none; background:white; display:block; margin:0 auto;"
        allowfullscreen
      ></iframe>
    <% } else { %>
      <img
        src="<%= project.img_url %>"
        alt="Project Image"
        class="img-fluid mx-auto d-block"
      >
    <% } %>

    <div class="project-title-bg mb-4">
      <h1 class="mb-0"><%= project.project_name %></h1>
    </div>

    <hr class="my-4" style="border-color: #000000">

    <p class="mb-4"><%= project.project_description %></p>

    <% if (project.is_nft) { %>
      <div id="project-id" class="d-none"><%= project.id %></div>
      <ul class="list-unstyled mb-4">
        <li><span class="fw-bold">Quantity:</span> <%= project.quantity %></li>
        <li><span class="fw-bold">Price (ETH):</span> <%= project.price_eth %></li>
        <li><span class="fw-bold">Open Date:</span> <%= project.open_date_gmt %></li>
        <li><span class="fw-bold">Royalty:</span> <%= project.royalty_percent %>%</li>
        <li><span class="fw-bold">Active:</span> <%= project.active %></li>
      </ul>
      <div class="my-3">
        <a id="mint-button" class="btn btn-primary">Mint</a>
      </div>
      <h3 class="topic">Status: </h3>
      <span id="status">Active - </span>
      <span id="mint-quant"></span>
      <span> of <%= project.quantity %> minted</span>
      <section class="justify-content-center text-white">
        <div class="text-center justify-content-center mt-5 mb-2">
          <h2 class="text-white">Mints from this project</h2>
          <p id="mint-message" class="text-white"></p>
        </div>
        <div class="mb-5">
          <div class="row justify-content-center">
            <div id="token-views"
              class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-3 text-center justify-content-center text-white">
              <!-- the client side ejs will render these dynamically from the script -->
            </div>
          </div>
        </div>
      </section>
    <% } %>

    <div class="my-3">
      <a href="/projects" class="btn btn-primary flex-fill">Back to All Projects</a>
    </div>
  </div>
</div>

    <!-- Footer EJS Partial -->
     <%- include('footer'); %>

  <!-- Bootstrap Bundle & Custom Page Script -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
   <script type="module" src="/js/project.js"></script>

  </body>
</html>